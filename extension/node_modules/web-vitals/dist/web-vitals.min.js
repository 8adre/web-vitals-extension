const e=(e=-1)=>({value:e,delta:0,entries:[],isFinal:!1}),t=(e,t)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const i=new PerformanceObserver(e=>e.getEntries().map(t));return i.observe({type:e,buffered:!0}),i}}catch(e){}};let i=!1;addEventListener("pagehide",({persisted:e})=>i=!e),addEventListener("unload",()=>{});const n=(e,t=!1)=>{addEventListener("visibilitychange",({timeStamp:t})=>{"hidden"===document.visibilityState&&e({timeStamp:t,isUnloading:i})},{capture:!0,once:t})},s=(e,t,i,n)=>{let s;return()=>{i&&t.isFinal&&i.disconnect(),t.value>=0&&(n||t.isFinal||"hidden"===document.visibilityState)&&(t.delta=t.value-(s||0),(t.delta||t.isFinal)&&(e(t),s=t.value))}},a=(i,a=!1)=>{const r=e(0),l=e=>{e.hadRecentInput||(r.value+=e.value,r.entries.push(e),d())},o=t("layout-shift",l),d=s(i,r,o,a);n(({isUnloading:e})=>{o&&o.takeRecords().map(l),e&&(r.isFinal=!0),d()})};let r="hidden"===document.visibilityState?0:1/0;n(({timeStamp:e})=>r=e,!0);const l=()=>r,o=i=>{const n=e(),a=t("paint",e=>{"first-contentful-paint"===e.name&&e.startTime<l()&&(n.value=e.startTime,n.isFinal=!0,n.entries.push(e),r())}),r=s(i,n,a)},d=i=>{const a=e(),r=e=>{a.value=e.processingStart-e.startTime,a.entries.push(e),a.isFinal=!0,o()},l=t("first-input",r),o=s(i,a,l);n(()=>{l&&(l.takeRecords().map(r),l.disconnect())},!0),l||window.perfMetrics&&window.perfMetrics.onFirstInputDelay&&window.perfMetrics.onFirstInputDelay((e,t)=>{a.value=e,a.event=t,a.isFinal=!0,o()})},c=new Promise(e=>["scroll","keydown","pointerdown"].map(t=>{addEventListener(t,e,{once:!0,passive:!0,capture:!0})})),p=(i,a=!1)=>{const r=e(),o=e=>{const t=e.startTime;l()<t?r.isFinal=!0:(r.value=t,r.entries.push(e)),p()},d=t("largest-contentful-paint",o),p=s(i,r,d,a),u=()=>{r.isFinal||(d&&d.takeRecords().map(o),r.isFinal=!0,p())};c.then(u),n(u,!0)};export{a as getCLS,o as getFCP,d as getFID,p as getLCP};
